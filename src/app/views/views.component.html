<div class="container-fluid">
  <div class="row mb-5">
    <div class="col-md-12 mt-3">
      <div class="row filter-block">
        <div class="col-md-8 heading">
          <h3>All Questions</h3>
          <p *ngIf="pageMeta?.total">{{pageMeta?.total}} questions</p>
        </div>
        <div class="col-md-4 text-right">
          <button type="button" class="btn btn-outline-primary" (click)="isCollapsed = !isCollapsed"
            [attr.aria-expanded]="!isCollapsed" aria-controls="collapseExample">
            <img style="height: 18px;vertical-align: text-top;" src="assets/images/gear.png"> Filter
          </button>
        </div>
        <div class="col-md-12 mb-3">
          <div id="collapseExample" [ngbCollapse]="isCollapsed">
            <form [formGroup]="myForm" (ngSubmit)="onSubmit(myForm)">
              <div class="row">
                <div class="col-md-4">
                  page: <input type="text" formControlName="page">
                </div>
                <div class="col-md-4">
                  pagesize : <input type="text" formControlName="pagesize">
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    fromdate:
                    <div class="input-group">
                      <input class="form-control" placeholder="yyyy-mm-dd" name="dp" formControlName="fromdate"
                        ngbDatepicker #d="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"></button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    todate:
                    <div class="input-group">
                      <input class="form-control" placeholder="yyyy-mm-dd" name="dp1" formControlName="todate"
                        ngbDatepicker #d1="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary calendar" (click)="d1.toggle()" type="button"></button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  order: <select formControlName="order">
                    <option value="desc">desc</option>
                    <option value="asc">asc</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    min:
                    <div class="input-group">
                      <input class="form-control" placeholder="yyyy-mm-dd" name="dp2" formControlName="min"
                        ngbDatepicker #d2="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary calendar" (click)="d2.toggle()" type="button"></button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="form-group">
                    max:
                    <div class="input-group">
                      <input class="form-control" placeholder="yyyy-mm-dd" name="dp3" formControlName="max"
                        ngbDatepicker #d3="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary calendar" (click)="d3.toggle()" type="button"></button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  sort: <select formControlName="sort">
                    <option value="activity">activity</option>
                    <option value="votes">votes</option>
                    <option value="creation">creation</option>
                    <option value="relevance">relevance</option>
                  </select>
                </div>
                <div class="col-md-4">
                  q: <input type="text" formControlName="q">
                </div>
                <div class="col-md-4">
                  accepted: <select formControlName="accepted">
                    <option value="True">True</option>
                    <option value="False">False</option>
                  </select>
                </div>
                <div class="col-md-4">
                  answers : <input type="text" formControlName="answers">
                </div>
                <div class="col-md-4">
                  body : <input type="text" formControlName="body">
                </div>
                <div class="col-md-4">
                  closed: <select formControlName="closed">
                    <option value="True">True</option>
                    <option value="False">False</option>
                  </select>
                </div>
                <div class="col-md-4">
                  migrated : <select formControlName="migrated">
                    <option value="True">True</option>
                    <option value="False">False</option>
                  </select>
                </div>
                <div class="col-md-4">
                  notice: <select formControlName="notice">
                    <option value="True">True</option>
                    <option value="False">False</option>
                  </select>
                </div>
                <div class="col-md-4">
                  nottagged : <input type="text" formControlName="nottagged">
                </div>
                <div class="col-md-4">
                  tagged: <input type="text" formControlName="tagged">
                </div>
                <div class="col-md-4">
                  title : <input type="text" formControlName="title">
                </div>
                <div class="col-md-4">
                  user : <input type="text" formControlName="user">
                </div>
                <div class="col-md-4">
                  url : <input type="text" formControlName="url">
                </div>
                <div class="col-md-4">
                  views : <input type="text" formControlName="views">
                </div>
                <div class="col-md-4">
                  wiki: <select formControlName="wiki">
                    <option value="True">True</option>
                    <option value="False">False</option>
                  </select>
                </div>
                <div class="col-md-12 text-right">
                  <button type="submit">Apply</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="row questions-block" *ngFor="let question of questions;trackBy:trackByQuestionId">
        <div class="col-md-1 question-status">
          <div class="votes">
            <div class="value">{{question.score}}</div>
            <div class="label">votes</div>
          </div>
          <div class="answer" [ngClass]="{'active':question.answer_count > 0}">
            <div class="value">{{question.answer_count}}</div>
            <div class="label">answers</div>
          </div>
          <div class="views">
            <div class="label">{{question.view_count}} views</div>
          </div>
        </div>
        <div class="col-md-11">
          <h5 class="question" (click)="navigateToDetails(question.question_id)">{{question.title}}</h5>
          <div class="question-body block-ellipsis" [innerHTML]="question.body_markdown"></div>
          <div class="row">
            <div class="col-md-8 tags">
              <span *ngFor="let tag of question.tags">{{tag}}</span>
            </div>
            <div class="col-md-4 owner">
              <p class="asked">asked {{question.creation_date | unixToDate | date:'medium'}}</p>
              <img src="{{question?.owner?.profile_image}}" alt="">
              <a href="{{question.owner.link}}" class="user-link" target="_blank">{{question?.owner?.display_name}}</a>
              <span class="reputation" matTooltip="Reputation: {{question?.owner?.reputation}}"
                matTooltipPosition="right">{{question?.owner?.reputation}}</span>
              <div class="badge" *ngIf="question?.owner">
                <span *ngIf="question.owner.badge_counts.gold"
                  matTooltip="{{question.owner.badge_counts.gold}} gold badge" matTooltipPosition="above">
                  <div class="badge_gold"></div>
                  {{question.owner.badge_counts.gold}}
                </span>
                <span *ngIf="question.owner.badge_counts.silver"
                  matTooltip="{{question.owner.badge_counts.silver}} silver badge" matTooltipPosition="above">
                  <div class="badge_silver"></div>
                  {{question.owner.badge_counts.silver}}
                </span>
                <span *ngIf="question.owner.badge_counts.bronze"
                  matTooltip="{{question.owner.badge_counts.bronze}} bronze badge" matTooltipPosition="above">
                  <div class="badge_bronze"></div>
                  {{question.owner.badge_counts.bronze}}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row pagination mb-5" *ngIf="pageMeta && pageMeta.total">
        <div class="col-md-8">
          <ngb-pagination [collectionSize]="pageMeta.total" [(page)]="page" [pageSize]="pageSize"
            (pageChange)="jumpToPage($event)" [maxSize]="5" [boundaryLinks]="true"></ngb-pagination>
        </div>
        <div class="col-md-4 text-right">
          <div class="btn-group btn-group-toggle" ngbRadioGroup [(ngModel)]=pageSize
            (ngModelChange)="pageSizeChanged()">
            <label ngbButtonLabel class="btn-outline-primary btn-sm">
              <input ngbButton type="radio" value=15>15
            </label>
            <label ngbButtonLabel class="btn-outline-primary btn-sm">
              <input ngbButton type="radio" value=30>30
            </label>
            <label ngbButtonLabel class="btn-outline-primary btn-sm">
              <input ngbButton type="radio" value=50>50
            </label>
          </div> <span class="per-page">per page</span>
        </div>
      </div>
    </div>
  </div>
</div>
